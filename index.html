<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controle de Entradas Automático</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th, td { border: 1px solid #000; padding: 8px; text-align: left; }
  h3 { margin-top: 30px; }
  .ativo { color: green; font-weight: bold; }
</style>
</head>
<body>

<h2>Histórico de Entradas</h2>

<table id="tabelaEntradas">
  <tr>
    <th>Data</th>
    <th>Tipo</th>
    <th>Valor</th>
    <th>Tempo</th>
  </tr>
</table>

<h3>Totais</h3>
<ul id="totais"></ul>

<script>
const entradas = [
  { tipo: "Andriele INSS", valor: 1000 },
  { tipo: "Marco INSS", valor: 1518 },
  { tipo: "Marco Obra", valor: 1518 },
  { tipo: "Lorena Fixada", valor: 1518 },
  { tipo: "Davi Azulejista", valor: 1200 }
];

const totais = {};
let somaTotal = 0;

const tabela = document.getElementById('tabelaEntradas');
const ulTotais = document.getElementById('totais');

function formatarTempo(segundos) {
  const h = String(Math.floor(segundos / 3600)).padStart(2,'0');
  const m = String(Math.floor((segundos % 3600) / 60)).padStart(2,'0');
  const s = String(segundos % 60).padStart(2,'0');
  return `${h}:${m}:${s}`;
}

const linhasData = []; // para salvar a hora de cada entrada

entradas.forEach(entrada => {
  const novaLinha = tabela.insertRow();
  const celulaData = novaLinha.insertCell(0);
  const celulaTipo = novaLinha.insertCell(1);
  const celulaValor = novaLinha.insertCell(2);
  const celulaTempo = novaLinha.insertCell(3);

  const dataAtual = new Date();
  celulaData.innerText = dataAtual.toLocaleString();
  celulaTipo.innerText = entrada.tipo;
  celulaValor.innerText = entrada.valor.toFixed(2);
  celulaTipo.classList.add('ativo');

  // Armazena o horário inicial para o cronômetro
  linhasData.push({ linha: celulaTempo, inicio: dataAtual });

  // Calcula total por tipo
  totais[entrada.tipo] = (totais[entrada.tipo] || 0) + entrada.valor;
  somaTotal += entrada.valor;
});

// Exibe totais por tipo
for(const tipo in totais){
  const li = document.createElement('li');
  li.innerText = `${tipo}: R$ ${totais[tipo].toFixed(2)}`;
  ulTotais.appendChild(li);
}

// Exibe soma geral
const liTotal = document.createElement('li');
liTotal.innerText = `Soma Total: R$ ${somaTotal.toFixed(2)}`;
liTotal.style.fontWeight = 'bold';
ulTotais.appendChild(liTotal);

// Atualiza cronômetro a cada segundo
setInterval(() => {
  const agora = new Date();
  linhasData.forEach(item => {
    const segundosPassados = Math.floor((agora - item.inicio)/1000);
    item.linha.innerText = formatarTempo(segundosPassados);
  });
}, 1000);
</script>

</body>
</html>
